<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>é‡çµ„å¥å­ (è§¸æ§ç‰ˆ)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f8ff;
      text-align: center;
      padding: 40px 20px;
      overflow: hidden;
    }

    h1 {
      font-size: 60px;
      color: #333;
    }

    #progress {
      font-size: 26px;
      margin-bottom: 20px;
    }

    #word-bank, #drop-zone {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 20px 0;
      gap: 12px;
    }

    .box {
      min-width: 100px;
      min-height: 60px;
      padding: 12px 20px;
      font-size: 32px;
      border-radius: 10px;
      user-select: none;
      touch-action: none;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.1s ease;
    }

    .word {
      background-color: #add8e6;
      border: 2px solid #4682b4;
      position: relative;
    }

    .drop-box {
      background-color: #fff8dc;
      border: 2px dashed #ccc;
    }

    .drop-box.filled {
      background-color: #d0f0c0;
    }

    .dragging {
      position: absolute;
      z-index: 999;
      pointer-events: none;
      opacity: 0.8;
    }

    #result {
      font-size: 28px;
      color: #d2691e;
      height: 40px;
    }
  </style>
</head>
<body>

  <h1>åˆç´šé‡çµ„å¥å­</h1>
  <div id="progress">ç›®å‰é€²åº¦ï¼š0 / 0</div>

  <div id="word-bank"></div>
  <div id="drop-zone"></div>
  <p id="result"></p>

 <!-- Audio -->
<audio id="start-sound" src="https://raw.githubusercontent.com/Sunflower-Education-HK/We-Bloom-Here/main/Gamestart.mp3"
preload="auto
"></audio>
<audio id="clap-sound" src="https://raw.githubusercontent.com/Sunflower-Education-HK/We-Bloom-Here/main/Clapping.mp3
"></audio>
<audio id="error-sound" src="https://raw.githubusercontent.com/Sunflower-Education-HK/We-Bloom-Here/main/uh-oh.mp3
"></audio>


  <script>
    const allSentences = [
      ["å°ç¾", "å–œæ­¡", "ç•«", "åœ–ç•«", "ã€‚"],
      ["å¼Ÿå¼Ÿ", "ä¸å–œæ­¡", "åƒ", "è˜‹æœ", "ã€‚"],
      ["æœ‹å‹", "é€äº†", "å¼Ÿå¼Ÿ", "ä¸€ä»½", "ç”Ÿæ—¥", "ç¦®ç‰©", "ã€‚"],
      ["èŠ±è²“", "å–œæ­¡", "æ‰", "è€é¼ ", "ã€‚"],
      ["çˆ¸çˆ¸", "æ‹¿è‘—", "èŠ±", "æº–å‚™", "é€çµ¦", "åª½åª½", "ã€‚"],
      ["å°ç‹—", "çœ‹è¦‹", "çƒ", "å°±æœƒ", "ç«‹åˆ»", "è¿½éå»", "ã€‚"],
      ["è€å¸«", "æ•™", "å­¸ç”Ÿ", "è®€æ›¸", "å’Œ", "å¯«å­—", "ã€‚"],
      ["å°æ¯æ™‚,", "å¼Ÿå¼Ÿ", "åœ¨æ“å ´", "ç©", "è·³ç¹©ã€‚"],
      ["çˆ¸çˆ¸", "åœ¨", "æ›¸æˆ¿è£¡", "å°ˆå¿ƒåœ°", "å·¥ä½œã€‚"],
      ["åª½åª½", "å°å¿ƒåœ°", "æŠ±èµ·", "å°å¯¶å¯¶ã€‚"],
      ["é¢¨å…’", "è¼•è¼•åœ°", "å¹é", "æˆ‘çš„", "é ­é«®ã€‚"],
      ["å§å§", "æœƒåœ¨", "å®¶ä¸­", "å¹«æ‰‹", "åš", "å®¶å‹™ã€‚"],
      ["å¼Ÿå¼Ÿ", "åœ¨", "å®¶ä¸­", "ç©å¾—", "æ»¿é ­å¤§æ±—ã€‚"],
      ["çˆ¸çˆ¸", "ç´¯å¾—", "ç¡åœ¨", "æ²™ç™¼", "ä¸Šã€‚"],
      ["è˜‹æœ", "æ˜¯", "æœ‰ç›Š", "çš„ã€‚"],
      ["ç¥–æ¯", "æœ€æ„›", "çœ‹", "é›»è¦–ã€‚"],
      ["æˆ‘", "æœ€å–œæ­¡", "ç´…è‰²", "çš„", "èŠ±æœµã€‚"],
      ["å“¥å“¥", "åœ¨", "çƒå ´", "æ‰“", "ç±ƒçƒã€‚"],
      ["æ˜ŸæœŸå…­", "æˆ‘", "å’Œ", "æœ‹å‹", "å»", "æµ·æ´‹å…¬åœ’", "ç©ã€‚"],
      ["å°ç‹—", "å–œæ­¡", "è·‘", "ä¹Ÿ", "å–œæ­¡", "ç¡è¦ºã€‚"],
      ["æ˜¥å¤©", "çš„", "æ™‚å€™,", "èŠ±æœµ", "é–‹å¾—", "å¾ˆ", "æ¼‚äº®ã€‚"],
      ["å¤å¤©", "çš„", "æ™‚å€™,", "å¤©æ°£", "ååˆ†", "ç‚ç†±ã€‚"],
      ["ç§‹å¤©", "çš„", "æ™‚å€™,", "å¾®é¢¨", "å¹èµ·", "è½è‘‰ã€‚"],
      ["çˆ¸çˆ¸", "æ¯å¤©", "éƒ½æœƒ", "å»", "é‹å‹•å ´", "è·‘æ­¥", "ã€‚"],
      ["åŒå­¸", "æ‹¾åˆ°", "ä¸€æœ¬æ›¸,", "æ‹¿èµ·ä¾†", "äº¤çµ¦", "è€å¸«ã€‚"],
      ["ä¸‹é›¨å¤©, ", "é’è›™", "éƒ½æœƒ", "åœ¨", "æ²³è£¡", "è·³å‡ºä¾†ã€‚"],
      ["å§å§", "å–œæ­¡", "è·³èˆ, ", "ä¹Ÿ", "å–œæ­¡", "å”±æ­Œã€‚"],
      ["å¦¹å¦¹", "è¦åƒ", "è¥¿ç“œ, ", "ä¹Ÿ", "è¦åƒ", "æ©™ã€‚"],
      ["é", "é¦¬è·¯,", "è¦", "å°å¿ƒã€‚"],
      ["ç´…ç‡ˆ", "åœ,", "ç¶ ç‡ˆ", "è¡Œã€‚"],
      ["è­·å£«", "æ¯å¤©", "éƒ½æœƒ", "åœ¨", "é†«é™¢", "ç…§é¡§", "ç—…äººã€‚"],
      ["è€å¸«", "æ¯å¤©", "åœ¨", "å­¸æ ¡", "æ•™æ›¸ã€‚"],
      ["å°ç†Š", "å’Œ", "å°è±¬", "éƒ½æ˜¯", "å¥½æœ‹å‹ã€‚"],
      ["èœœèœ‚", "æ¯å¤©", "è¾›å‹åœ°", "æ¡", "èŠ±èœœã€‚"],
      ["è´è¶", "åœ¨", "èŠ±é–“", "é£›èˆã€‚"],
      ["æ¨¹æœ¨", "æ¯å¤©", "ç‚º", "æˆ‘å€‘", "å‘¼å‡º", "æ°§æ°£ã€‚"],
      ["æ™šä¸Š,", "çˆ¸çˆ¸", "å¸¶", "æˆ‘å€‘", "åˆ°", "å…¬åœ’", "æ•£æ­¥ã€‚"],
      ["æ”¾å­¸å¾Œ,", "åª½åª½", "å¸¶", "æˆ‘å€‘", "åˆ°", "éŠæ¨‚å ´", "ç©ã€‚"],
      ["å¤–ç¥–æ¯", "å–œæ­¡", "åƒ", "é¦™è•‰ã€‚"],
      ["æˆ‘", "æ¯å¤©", "å", "å·´å£«", "ä¸Šå­¸å»ã€‚"]
    ];

    const totalQuestions = allSentences.length;
    let correctCount = 0;
    let correctAnswer = [];
    let draggedElement = null;
    let clone = null;

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function updateProgress() {
      document.getElementById("progress").textContent = `ç›®å‰é€²åº¦ï¼š${correctCount} / ${totalQuestions}`;
    }

    function createBox(text, isWord) {
      const box = document.createElement("div");
      box.className = "box " + (isWord ? "word" : "drop-box");
      box.textContent = text || "";

      if (isWord) {
        box.addEventListener("pointerdown", (e) => {
          draggedElement = box;

          // å»ºç«‹æ‹–æ‹‰è¦–è¦º clone
          clone = box.cloneNode(true);
          clone.classList.add("dragging");
          document.body.appendChild(clone);
          moveClone(e);

          box.setPointerCapture(e.pointerId);
        });

        box.addEventListener("pointermove", (e) => {
          if (clone) moveClone(e);
        });

        box.addEventListener("pointerup", (e) => {
          const dropBoxes = document.querySelectorAll(".drop-box");
          let dropped = false;
          dropBoxes.forEach(dropBox => {
            const rect = dropBox.getBoundingClientRect();
            if (
              e.clientX >= rect.left &&
              e.clientX <= rect.right &&
              e.clientY >= rect.top &&
              e.clientY <= rect.bottom
            ) {
              if (dropBox.firstChild) {
                document.getElementById("word-bank").appendChild(dropBox.firstChild);
                dropBox.classList.remove("filled");
              }
              dropBox.textContent = "";
              dropBox.appendChild(box);
              dropBox.classList.add("filled");
              dropped = true;
            }
          });

          if (!dropped) {
            document.getElementById("word-bank").appendChild(box);
          }

          if (clone) {
            clone.remove();
            clone = null;
          }

          draggedElement = null;
          checkAnswer();
        });
      }

      return box;
    }

    function moveClone(e) {
      if (clone) {
        clone.style.left = e.clientX - clone.offsetWidth / 2 + "px";
        clone.style.top = e.clientY - clone.offsetHeight / 2 + "px";
      }
    }

    function loadSentence(sentence) {
      document.getElementById("result").textContent = "";
      document.getElementById("word-bank").innerHTML = "";
      document.getElementById("drop-zone").innerHTML = "";

      correctAnswer = [...sentence];
      const shuffled = shuffle([...sentence]);

      shuffled.forEach(word => {
        const wordBox = createBox(word, true);
        document.getElementById("word-bank").appendChild(wordBox);
      });

      for (let i = 0; i < correctAnswer.length; i++) {
        const dropBox = createBox("", false);
        document.getElementById("drop-zone").appendChild(dropBox);
      }
    }

    function loadNextSentence() {
      updateProgress();

      if (allSentences.length === 0) {
        document.getElementById("result").textContent = "ğŸ‰ æ­å–œä½ å®Œæˆæ‰€æœ‰é¡Œç›®ï¼";
        return;
      }

      const index = Math.floor(Math.random() * allSentences.length);
      const sentence = allSentences.splice(index, 1)[0];
      loadSentence(sentence);
    }

    function checkAnswer() {
  const dropBoxes = document.querySelectorAll(".drop-box");
  const allFilled = Array.from(dropBoxes).every(box => box.children.length > 0);

  if (allFilled) {
    const answer = Array.from(dropBoxes).map(box => box.firstChild.textContent);
    if (JSON.stringify(answer) === JSON.stringify(correctAnswer)) {
      document.getElementById("result").textContent = "âœ… ç­”å°äº†ï¼";
      document.getElementById("clap-sound").play(); // âœ… æ’­æ”¾æ‹æ‰‹
      correctCount++;
      setTimeout(() => loadNextSentence(), 3000);  // âœ… å»¶é² 3 ç§’
    } else {
      document.getElementById("result").textContent = "âŒ éŒ¯äº†ï¼Œå†è©¦ä¸€æ¬¡ï½";
      document.getElementById("error-sound").play(); // âœ… æ’­æ”¾éŒ¯èª¤éŸ³
      setTimeout(() => loadSentence(correctAnswer), 1000);
    }
  }
}

    // åˆå§‹åŒ–
window.addEventListener("DOMContentLoaded", () => {
  const startSound = document.getElementById("start-sound");
  startSound.play().catch((e) => {
    // å¦‚æœç€è¦½å™¨é˜»æ“‹è‡ªå‹•æ’­æ”¾ï¼Œå¯ä»¥è¦æ±‚ç”¨æˆ¶äº’å‹•å¾Œå†æ’­æ”¾
    console.log("éœ€è¦ä½¿ç”¨è€…äº’å‹•æ‰èƒ½æ’­æ”¾éŸ³æ•ˆ");
  });

  updateProgress();
  loadNextSentence();

  </script>

</body>
</html>
